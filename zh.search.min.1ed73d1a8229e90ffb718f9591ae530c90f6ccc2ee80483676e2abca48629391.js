"use strict";(function(){const searchDataURL="/zh.search-data.min.ea912fea21dedf4f420586a61562f9e7b04a51a9dee7ee7b6caaea26ba5a5da9.json",indexConfig=Object.assign({encode:!1,tokenize:function(str){return str.replace(/[\x00-\x7F]/g,"").split("")}},{includeScore:!0,useExtendedSearch:!0,fieldNormWeight:1.5,threshold:.2,ignoreLocation:!0,keys:[{name:"title",weight:.7},{name:"content",weight:.3}]}),input=document.querySelector("#book-search-input"),results=document.querySelector("#book-search-results");if(!input)return;input.addEventListener("focus",init),input.addEventListener("keyup",search),document.addEventListener("keypress",focusSearchFieldOnKeyPress);function focusSearchFieldOnKeyPress(event){if(event.target.value!==0[0])return;if(input===document.activeElement)return;const characterPressed=String.fromCharCode(event.charCode);if(!isHotkey(characterPressed))return;input.focus(),event.preventDefault()}function isHotkey(character){const dataHotkeys=input.getAttribute("data-hotkeys")||"";return dataHotkeys.indexOf(character)>=0}function init(){input.removeEventListener("focus",init),input.required=!0,fetch(searchDataURL).then(pages=>pages.json()).then(pages=>{window.bookSearchIndex=new Fuse(pages,indexConfig)}).then(()=>input.required=!1).then(search)}function search(){for(;results.firstChild;)results.removeChild(results.firstChild);if(!input.value)return;const searchHits=window.bookSearchIndex.search(input.value).slice(0,10);searchHits.forEach(function(page){const li=element("<li><a href></a><small></small></li>"),a=li.querySelector("a"),small=li.querySelector("small");a.href=page.item.href,a.textContent=page.item.title,small.textContent=page.item.section,results.appendChild(li)})}function element(content){const div=document.createElement("div");return div.innerHTML=content,div.firstChild}})()